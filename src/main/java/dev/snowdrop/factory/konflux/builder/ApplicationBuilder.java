package dev.snowdrop.factory.konflux.builder;

import dev.snowdrop.dsl.konflux.v1alpha1.Application;
import dev.snowdrop.model.Configurator;

/*
New YAML example: https://github.com/konflux-ci/konflux-ci/blob/main/test/resources/demo-users/user/ns2/application-and-component.yaml

and

hereafter => YAML generated by konflux-ci
---
kind: Application
metadata:
  annotations:
    application.thumbnail: "10"
  name: my-quarkus
  namespace: user-ns1
spec:
  displayName: my-quarkus
* */
public class ApplicationBuilder {

    public static Application createApplication(Configurator cfg) {
        Application application = new dev.snowdrop.dsl.konflux.v1alpha1.ApplicationBuilder()
            // @formatter:off
            .withNewMetadata()
               .withName(cfg.getApplication().getName())
               .withAnnotations(Annotations.getApplicationAnnotations(cfg))
               .withNamespace(cfg.getNamespace())
            .endMetadata()
            .withNewSpec()
               .withDisplayName(cfg.getApplication().getName() != null ? cfg.getApplication().getName() : cfg.getJob().getName())
            .endSpec()
            // @formatter:on
            .build();
        return application;
    }

}
